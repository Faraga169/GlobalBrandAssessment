
@model AddAndUpdateDepartmentDTO

<div class="d-flex justify-content-center">
    <h2 class="text-secondary fs-3">Create Department</h2>
</div>

<div id="formContainer">
    @await Html.PartialAsync("_CreateDepartmentPartial", Model)
</div>

@section Scripts{
    <partial name="_ValidationScriptsPartial" />
       
    <script>
        $(document).ready(function () {
          $("#CreateDepartmentForm").on("submit", function (e) {
            e.preventDefault();
            if (!$(this).valid()) 
                   return; 
        
            var formData = new FormData(this);

            $.ajax({
              url: '@Url.Action("Create", "Department")',
              type: "POST",
              data: formData,
              processData: false,
              contentType: false,
              success: function (response) {
                if (response.success) {
                window.location.href =  response.redirectUrl;
                } else {

                  $("#formContainer").html(response);
                }
              },
              error: function (xhr) {
                    alert("Something went wrong. Please try again.",xhr.responseText);
              }
            });
          });
        });
    </script>


}
