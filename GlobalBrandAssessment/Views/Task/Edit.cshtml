@model AddandUpdateTaskDTO

@{
	ViewData["Title"] = "Edit Task";
}

<div class="d-flex justify-content-center">
	<h2 class="text-secondary fs-3">Edit @Model.Title</h2>
</div>

<div id="formContainer">
	@await Html.PartialAsync("_EditTaskPartial", Model)
</div>
@section Scripts{
    <partial name="_ValidationScriptsPartial" />
    <script>
             $(document).ready(function () {
            $("#EditTaskForm").on("submit", function (e) {
            e.preventDefault();
			if (!$(this).valid())
				   return;
            var formData = new FormData(this);

            $.ajax({
                url: '@Url.Action("Edit", "Task")',
                type: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                        if (response.success) {
                            window.location.href =response.redirectUrl;;
                        } else {
                        $("#formContainer").html(response);
                        }
                    } ,
                    error: function (xhr) {
                    alert("Something went wrong. Please try again.",xhr.responseText);
                }

            });
        });
             });
    </script>
}
